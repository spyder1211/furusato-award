# ふるさとコネクト マッチングプラットフォーム MVP要件定義書

## 1. MVP概要

### 1.1 目的
1ヶ月で実装可能な最小限の機能で、自治体と企業のマッチングの基本的な価値を検証する。

### 1.2 MVP範囲の方針
- **優先順位1：首長×首長マッチング機能**
- **優先順位2：企業×自治体マッチング機能**
- シンプルなマッチング機能
- 管理者（アイハーツ）による手動仲介を前提とした設計
- 複雑な機能は後回し、コア機能のみ実装

### 1.3 想定期間
**開発期間：4週間**
- Week 1：基本設計 + 認証・ユーザー管理 + プロフィール機能
- Week 2：首長マッチング機能（プロフィール一覧・詳細・オファー）
- Week 3：企業マッチング機能 + 管理画面
- Week 4：テスト + デプロイ

---

## 2. MVP機能一覧

### 2.1 会員登録・認証機能（必須）

#### 2.1.1 ユーザー登録
**首長アカウント（自治体）**
- メールアドレス
- パスワード
- 都道府県
- 市区町村名
- 首長名（担当者名）
- 電話番号
- 人口（万人）
- 特色（テキストエリア）
- 当選回数
- 出身地
- 出身大学
- 信条（テキストエリア）
- 得意分野（テキストエリア）
- ふるさと納税金額（円）

**企業アカウント**
- メールアドレス
- パスワード
- 企業名
- 担当者名
- 電話番号
- 事業概要（テキストエリア）
- 提供可能なサービス・技術（テキストエリア）

#### 2.1.2 ログイン機能
- メールアドレス + パスワード
- セッション管理
- ログアウト

#### 2.1.3 アカウント承認
- 管理者による手動承認制
- 承認待ちステータス表示
- 承認されるまでは閲覧のみ可能

---

### 2.2 首長×首長マッチング機能（最優先・コア機能）

#### 2.2.1 首長プロフィール一覧
- 登録されている全首長のプロフィールを一覧表示
- 表示項目：
  - 都道府県・市区町村名
  - 首長名
  - 人口
  - 特色（一部抜粋）
  - 得意分野
  - ふるさと納税金額
- フィルター機能：
  - 都道府県で絞り込み
  - 人口規模で絞り込み
  - 得意分野で絞り込み
- ページネーション（20件/ページ）

#### 2.2.2 首長プロフィール詳細
- すべてのプロフィール項目を表示
  - 都道府県・市区町村名
  - 首長名
  - 人口
  - 特色
  - 当選回数
  - 出身地
  - 出身大学
  - 信条
  - 得意分野
  - ふるさと納税金額

#### 2.2.3 オファー機能（首長→首長）
- プロフィール詳細ページから「オファーする」ボタン
- オファー送信時：
  - オファー先の首長に通知
  - 管理者（アイハーツ）にフラグが上がる（通知）
- オファーメッセージ（任意）：
  - 連携したい内容や理由を記載可能

#### 2.2.4 オファー受信・管理
- 受け取ったオファー一覧
- オファー詳細表示：
  - オファー元の首長情報
  - オファーメッセージ
  - オファー日時
- ステータス：
  - 新規（pending）
  - 対応中（contacted）
  - 完了（completed）

---

### 2.3 企業×自治体マッチング機能（コア機能）

#### 2.3.1 企業サービス・技術事例の掲載（企業のみ）
- タイトル（必須）
- カテゴリ選択（プルダウン）
  - 観光振興
  - 子育て支援
  - DX推進
  - インフラ整備
  - 地域活性化
  - 環境・エネルギー
  - その他
- サービス・技術の詳細（テキストエリア、必須）
- 導入実績・事例（テキストエリア、任意）
- 自社の強み（テキストエリア、任意）
- 公開/非公開ステータス

#### 2.3.2 企業サービス一覧表示
- すべてのユーザーが閲覧可能
- カテゴリフィルター
- 新着順 / カテゴリ別表示
- ページネーション（20件/ページ）

#### 2.3.3 企業サービス詳細表示
- サービスの全情報表示
- 投稿した企業名
- 投稿日時

#### 2.3.4 オファー機能（自治体→企業）
- サービス詳細ページから「オファーする」ボタン
- オファー送信時：
  - オファー先の企業に通知
  - 管理者（アイハーツ）にフラグが上がる（通知）
- オファーメッセージ（任意）：
  - 相談したい内容や背景を記載可能

#### 2.3.5 オファー受信・管理（企業側）
- 受け取ったオファー一覧
- オファー詳細表示：
  - オファー元の自治体情報
  - オファーメッセージ
  - オファー日時

---

### 2.4 通知機能（シンプル）

- メール通知のみ（システム内通知は次フェーズ）
- 以下のタイミングで送信：
  - 首長オファーが送られた（オファー先首長・管理者向け）
  - 企業オファーが送られた（オファー先企業・管理者向け）

---

### 2.5 管理機能（アイハーツ用）

#### 2.5.1 ユーザー管理
- 登録申請一覧
- 承認/却下ボタン
- ユーザー一覧（首長/企業別）
- プロフィール編集機能

#### 2.5.2 首長マッチング管理
- すべての首長オファー一覧
- オファー詳細表示
- ステータス管理（新規/対応中/完了）
- メモ機能（対応履歴記録用）

#### 2.5.3 企業マッチング管理
- すべての企業サービス一覧
- すべての企業オファー一覧
- オファー詳細表示
- ステータス管理（新規/対応中/完了）
- メモ機能（対応履歴記録用）
- 削除機能（不適切な投稿対応）

#### 2.5.4 基本統計
- 登録ユーザー数（首長/企業）
- 首長オファー数
- 企業サービス投稿数
- 企業オファー数
- マッチング成立数

---

## 3. MVP で除外する機能

以下は次フェーズ以降に実装：

### 3.1 除外機能
- ❌ システム内チャット機能
- ❌ ファイルアップロード機能
- ❌ 高度な検索機能（キーワード検索など）
- ❌ おすすめ機能・レコメンド
- ❌ 詳細な分析レポート
- ❌ プロフィール画像アップロード
- ❌ パスワードリセット機能（管理者が手動対応）
- ❌ 二段階認証
- ❌ マッチング後の商談日程調整機能

### 3.2 簡略化する機能
- ⚠️ 通知はメールのみ（プッシュ通知なし）
- ⚠️ デザインはシンプルなUIフレームワーク利用（Tailwind CSS）
- ⚠️ オファーは一方向のみ（双方向の承認フローは次フェーズ）

---

## 4. 技術スタック

### 4.1 フレームワーク
- **Laravel** (純粋なLaravelアプリケーション)

### 4.2 フロントエンド
- **Blade** テンプレートエンジン
- **Tailwind CSS** (CDN版)

### 4.3 データベース
- **MySQL** または **PostgreSQL**
- **Eloquent ORM** (Laravel標準)

### 4.4 認証
- **Laravel標準認証** (Laravel Breeze または手動実装)

### 4.5 メール送信
- **Laravel Mail** (Mailtrap、SendGrid、Resend等)

### 4.6 開発環境
- PHP 8.1以上
- Composer

---

## 5. データベース設計（簡易版）

### 5.1 主要テーブル

```
users
- id
- email
- password (hashed)
- role (municipality / company / admin)
- name (首長名または担当者名)
- phone
- is_approved
- created_at
- updated_at

municipality_profiles (首長プロフィール)
- id
- user_id (foreign key -> users.id)
- prefecture (都道府県)
- city (市区町村名)
- population (人口、万人)
- characteristics (特色)
- election_count (当選回数)
- birthplace (出身地)
- university (出身大学)
- philosophy (信条)
- expertise (得意分野)
- furusato_tax_amount (ふるさと納税金額、円)
- created_at
- updated_at

company_profiles (企業プロフィール)
- id
- user_id (foreign key -> users.id)
- company_name (企業名)
- description (事業概要)
- services (提供可能なサービス・技術)
- created_at
- updated_at

company_services (企業サービス・技術事例)
- id
- user_id (company)
- title
- category
- description (サービス・技術の詳細)
- case_studies (導入実績・事例)
- strengths (自社の強み)
- status (draft / published)
- created_at
- updated_at

municipality_offers (首長→首長オファー)
- id
- sender_id (user_id - 送信側の首長)
- receiver_id (user_id - 受信側の首長)
- message (オファーメッセージ)
- status (pending / contacted / completed)
- note (管理者用メモ)
- created_at
- updated_at

company_offers (自治体→企業オファー)
- id
- service_id (company_services.id)
- municipality_user_id (user_id - 送信側の自治体)
- message (オファーメッセージ)
- status (pending / contacted / completed)
- note (管理者用メモ)
- created_at
- updated_at
```

---

## 6. ユーザーフロー（MVP版）

### 6.1 首長の流れ（首長マッチング）
1. 会員登録（詳細なプロフィール入力）
2. 管理者承認待ち
3. 承認後、他の首長プロフィールを閲覧
4. 気になる首長にオファーを送信
5. 他の首長からオファーを受信
6. アイハーツから連絡を受けて商談調整

### 6.2 首長の流れ（企業マッチング）
1. 会員登録（首長マッチングと同じ）
2. 管理者承認待ち
3. 承認後、企業サービス一覧を閲覧
4. 気になる企業サービスにオファーを送信
5. アイハーツから連絡を受けて商談調整

### 6.3 企業の流れ
1. 会員登録（企業プロフィール入力）
2. 管理者承認待ち
3. 承認後、自社のサービス・技術事例を掲載
4. 自治体からオファーを受信
5. アイハーツから連絡を受けて商談調整

### 6.4 管理者（アイハーツ）の流れ
1. 新規登録を承認
2. オファー通知を受ける（首長→首長、自治体→企業）
3. 両者に連絡し、商談を調整
4. ステータスを更新（対応中/完了）
5. メモで対応履歴を記録

---

## 7. 画面一覧（MVP版）

### 7.1 公開ページ
- ランディングページ（サービス説明）
- ログインページ
- 会員登録ページ（首長/企業選択）

### 7.2 首長用ページ（要ログイン）
- ダッシュボード
- **首長マッチング機能**
  - 首長プロフィール一覧
  - 首長プロフィール詳細
  - 自分のプロフィール編集
  - 送信したオファー一覧
  - 受信したオファー一覧
- **企業マッチング機能**
  - 企業サービス一覧
  - 企業サービス詳細
  - 送信したオファー一覧（企業向け）

### 7.3 企業用ページ（要ログイン）
- ダッシュボード
- 自社プロフィール編集
- サービス・技術事例一覧（自分の投稿）
- サービス・技術事例投稿/編集
- 受け取ったオファー一覧

### 7.4 管理者用ページ
- ダッシュボード（統計）
- ユーザー管理（承認/却下）
- 首長マッチング管理
  - 首長オファー一覧
  - オファー詳細・ステータス管理
- 企業マッチング管理
  - 企業サービス一覧
  - 企業オファー一覧
  - オファー詳細・ステータス管理

---

## 8. 成功指標（KPI）

MVPフェーズで検証すべき指標：

1. **ユーザー登録数**
   - 目標：首長 20名、企業 30社

2. **首長マッチング**
   - 目標：首長オファー数 15件以上
   - 目標：マッチング成立（商談設定）5件以上

3. **企業サービス投稿数**
   - 目標：30件以上

4. **企業マッチング**
   - 目標：企業オファー数 20件以上
   - 目標：マッチング成立（商談設定）5件以上

5. **ユーザーフィードバック**
   - 使いやすさ、必要な機能のヒアリング

---

## 9. リスクと対策

| リスク | 対策 |
|--------|------|
| 開発期間が足りない | 機能をさらに削減、管理画面を最小限に |
| ユーザー登録が進まない | 手動でのユーザー招待、初期は限定公開 |
| セキュリティ懸念 | 信頼できる認証ライブラリ使用、SSL必須 |
| バグが多い | 自動テスト導入、段階的リリース |

---

## 10. 次フェーズでの拡張

MVP検証後、以下を追加：

### フェーズ2（+2ヶ月）
- システム内メッセージング（チャット機能）
- ファイルアップロード機能
- 高度な検索・フィルター（キーワード検索）
- プロフィール画像アップロード
- パスワードリセット機能
- マッチング後の商談日程調整機能

### フェーズ3（+2ヶ月）
- レコメンド機能（おすすめマッチング提案）
- 詳細な分析レポート
- イベント開催機能（オンライン交流会など）
- 双方向承認フロー（オファー→承認→マッチング成立）
- 決済機能（有料プラン対応）

---

## 11. まとめ

このMVPは**首長×首長マッチングと企業×自治体マッチングの基本的な価値検証**に特化し、4週間で実装可能な最小限の機能セットです。

**重視するポイント：**
- **優先順位1：首長マッチング機能**
  - 詳細なプロフィール情報で質の高いマッチングを実現
  - 双方向オファー機能
  - アイハーツの仲介による信頼性の担保

- **優先順位2：企業マッチング機能**
  - 企業が事例を掲載し、自治体がオファー
  - シンプルで直感的なUI

- **共通：**
  - 確実に動作するコア機能
  - 早期のユーザーフィードバック取得
  - 管理者による手動仲介で質を担保

**次のアクションアイテム：**
- [ ] 技術スタック最終決定（Laravel + Blade + Tailwind CSS）
- [ ] デザインモックアップ作成
- [ ] 開発環境セットアップ
- [ ] 週次進捗確認の設定
- [ ] 首長プロフィール項目の最終確認
